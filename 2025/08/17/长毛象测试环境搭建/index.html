<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="é•¿æ¯›è±¡æµ‹è¯•ç¯å¢ƒæ­å»º"><meta name="keywords" content="è¨€è®ºè‡ªç”±åªåœ¨è¿™é‡Œ,è¸©å‘å¿ƒå¾—"><meta name="author" content="å¦™ç“¦è‰,undefined"><meta name="copyright" content="å¦™ç“¦è‰"><meta name="fediverse:creator" content="@Network@cmx.dzm.pp.ua"><link rel="me" href="https://cmx.dzm.pp.ua/@Network"><title>é•¿æ¯›è±¡æµ‹è¯•ç¯å¢ƒæ­å»ºã€å¦™ç“¦ç§å­ã€‘</title><link rel="stylesheet" href="../../../../css/fan.css"><link rel="stylesheet" href="../../../../css/thirdparty/jquery.mCustomScrollbar.min.css"><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><link rel="icon" href="../../../../favicon.ico"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch-theme-algolia.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4"></script><!-- link(rel="dns-prefetch" href="https://cdn.jsdelivr.net")--><!-- link(rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css")--><!-- script(src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer)--><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- script(src=url_for("/js/mathjax/mathjax.js"))--><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
});
</script><script>var isPassword = '' || false;
if (isPassword) {
    if (prompt('è¯·è¾“å…¥æ–‡ç« å¯†ç ') !== '') {
        alert('å¯†ç é”™è¯¯ï¼');
        history.back();
    }
}</script><script>window.GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"BLFJMI3OZT","apiKey":"bfca30d788c8947af1865ed33655b646","indexName":"blog","hits":{"per_page":10},"languages":{"input_placeholder":"æœç´¢æ–‡ç« ","hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹:${query}","hits_stats":"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼Œç”¨æ—¶ ${time} æ¯«ç§’"}},
  localSearch: undefined,
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  gitment: {},
  valine: {"appId":"xASAWVJMlgR6Z0IAumJosLmQ-MdYXbMMI","appKey":"hrSzqoj09CVByDzUeBMDEjuF","serverURLs":"https://xasawvjm.api.lncldglobal.com"},
  twikoo: {},
}</script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="atom.xml" title="å¦™ç“¦ç§å­" type="application/atom+xml">
</head><body><canvas id="universe"></canvas><!--#body--><div id="sidebar"><div class="toggle-sidebar-info button-hover"><span data-toggle="æ–‡ç« ç›®å½•">ç«™ç‚¹æ¦‚è§ˆ</span></div><div class="sidebar-toc"><div class="sidebar-toc-title">ç›®å½•</div><div class="sidebar-toc-progress"><span class="progress-notice">æ‚¨å·²é˜…è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc-progress-bar"></div></div><div class="sidebar-toc-content" id="sidebar-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%A2%E5%90%91%E7%9A%84%E8%AF%BB%E8%80%85"><span class="toc-number">1.</span> <span class="toc-text">é¢å‘çš„è¯»è€…</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Vagrant%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">2.</span> <span class="toc-text">Vagrantçš„é—®é¢˜</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%B8%A9%E5%9D%91%E8%AE%B0"><span class="toc-number">3.</span> <span class="toc-text">è™šæ‹Ÿæœºè¸©å‘è®°</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#VMWare"><span class="toc-number">3.1.</span> <span class="toc-text">VMWare</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9D%911"><span class="toc-number">3.1.1.</span> <span class="toc-text">å‘1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9D%912"><span class="toc-number">3.1.2.</span> <span class="toc-text">å‘2</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VirtualBox"><span class="toc-number">3.2.</span> <span class="toc-text">VirtualBox</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9E%E5%BD%92Vagrant"><span class="toc-number">4.</span> <span class="toc-text">å›å½’Vagrant</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%90%8E%E8%AE%B0"><span class="toc-number">5.</span> <span class="toc-text">åè®°</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info-avatar"><img class="author-info-avatar-img" src="/avatar.jpg"></div><div class="author-info-name">å¦™ç“¦è‰</div><div class="author-info-description"></div><div class="links-buttons"><a class="links-button button-hover" href="https://github.com/dongzhimin-xz" target="_blank">GitHub<i class="icon-dot bg-color1"></i></a><a class="links-button button-hover" href="https://cmx.dzm.pp.ua/@Network" target="_blank">é•¿æ¯›è±¡<i class="icon-dot bg-color4"></i></a><a class="links-button button-hover" href="https://bsky.app/profile/dzm.pp.ua" target="_blank">BlueSky<i class="icon-dot bg-color2"></i></a></div><div class="author-info-articles"><a class="author-info-articles-archives article-meta" href="../../../../archives"><span class="pull-top">æ—¥å¿—</span><span class="pull-bottom">13</span></a><a class="author-info-articles-tags article-meta" href="../../../../tags"><span class="pull-top">æ ‡ç­¾</span><span class="pull-bottom">22</span></a><a class="author-info-articles-categories article-meta" href="../../../../categories"><span class="pull-top">åˆ†ç±»</span><span class="pull-bottom">21</span></a></div><div class="friend-link"><a class="friend-link-text" href="https://dzm.pp.ua/" target="_blank">ä¸ªäººä¸»é¡µ</a><a class="friend-link-text" href="https://cmx.dzm.pp.ua/" target="_blank">é•¿æ¯›è±¡å®ä¾‹</a></div></div></div><div id="main-container"><header><div id="menu-outer"><i class="menu-list-icon fas fa-bars"></i><nav id="menu-inner"><a class="menu-item" href="/">é¦–é¡µ</a><a class="menu-item" href="/tags">æ ‡ç­¾</a><a class="menu-item" href="/categories">åˆ†ç±»</a><a class="menu-item" href="/archives">å½’æ¡£</a><a class="menu-item" href="/about">å…³äº</a></nav><div class="right-info"><a class="search social-icon"><i class="fas fa-search"></i><span> æœç´¢</span></a><a class="title-name" href="/">å¦™ç“¦ç§å­</a><span id="now-time"></span></div></div></header><div id="content-outer"><div id="content-inner"><article id="post"><div class="post-header"><div class="title">é•¿æ¯›è±¡æµ‹è¯•ç¯å¢ƒæ­å»º</div><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> å‘è¡¨äº 2025-08-17 | æ›´æ–°äº 2025-08-18</time><!--time.button-hover.post-date #[i.fas.fa-calendar-alt.article-icon(aria-hidden="true")] #[=__('post.modified')] #[=date(page['updated'], config.date_format)]--><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="../../../../categories/%E5%BB%BA%E7%AB%99%E6%8A%80%E6%9C%AF/">å»ºç«™æŠ€æœ¯</a><i class="fa fa-angle-right" style="margin: 0 8px;"></i><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="../../../../categories/%E5%BB%BA%E7%AB%99%E6%8A%80%E6%9C%AF/%E8%B8%A9%E5%9D%91%E5%BF%83%E5%BE%97/">è¸©å‘å¿ƒå¾—</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="../../../../tags/%E8%A8%80%E8%AE%BA%E8%87%AA%E7%94%B1%E5%8F%AA%E5%9C%A8%E8%BF%99%E9%87%8C/">è¨€è®ºè‡ªç”±åªåœ¨è¿™é‡Œ</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="../../../../tags/%E8%B8%A9%E5%9D%91%E5%BF%83%E5%BE%97/">è¸©å‘å¿ƒå¾—</a></div></div></div><div class="main-content"><p>æˆ‘ä¹‹å‰å°±æƒ³å¯¹é•¿æ¯›è±¡çš„ä»£ç è¿›è¡Œæ·±åº¦åœ°é­”æ”¹ï¼Œä½†æ˜¯å¯¹å…¶æ¶æ„ä¸€çªä¸é€šï¼Œåªèƒ½ä¸€æ­¥ä¸€æ­¥å­¦ã€‚<br>å¯¹äºæƒ³è¦å­¦ä¹ åˆ«äººçš„ä»£ç ï¼Œå°±æ¯”å¦‚è¶…çº§é…·ç‚«çš„<a target="_blank" rel="noopener" href="https://hello.2heng.xin/">å°æ£®æ—</a>ï¼Œä¹Ÿéœ€è¦æŒæ¡æ­å»ºç¯å¢ƒçš„æ–¹æ³•ï¼Œå¦åˆ™å°±ä¼šå‘ç°äººå®¶çš„mainåˆ†æ”¯ä»£ç ä½ æ ¹æœ¬è·‘ä¸åŠ¨ğŸ˜„</p>
<span id="more"></span>
<p>åˆ°æˆ‘è¸©å‘ä¹‹å‰ï¼Œæˆ‘åªçŸ¥é“ï¼Œåœ¨<code>vagrant up</code>ä¹‹åï¼Œå†<code>git checkout</code>åˆ°å…¶ä»–çš„ä¸­ç‰ˆæœ¬ï¼Œç”šè‡³å¤§ç‰ˆæœ¬ï¼Œè‡³å°‘éœ€è¦åœ¨è¿™ä¸ªæµ‹è¯•ç¯å¢ƒèµ°ä¸€éé•¿æ¯›è±¡çš„æ›´æ–°æµç¨‹ã€‚è¦ä¹ˆç›´æ¥<code>vagrant destroy</code>ã€‚å¯åˆ°äº†å·®ä¸å¤šå‰ä¸¤å‘¨çš„æ—¶å€™ï¼Œæˆ‘å‘ç°æ–°å»ºvagrantå®ä¾‹ä¹Ÿä¸é¡¶ç”¨äº†ï¼äºæ˜¯æäº¤äº†ä¸€ä¸ªIssueï¼Œåæ¥è¿˜æŠŠ<code>Vagrantfile</code>ç»™æ”¹äº†ï¼Œæäº¤äº†Pull Requestã€‚ğŸ¥º<br><img src="vagrantPR.png"><br>è¿™æ˜¯å› ä¸ºæˆ‘è¸©å‘å¤ªå¤šå¯¼è‡´æ”¹äº†åˆæ”¹ğŸ˜„<br>å®˜æ–¹çš„ç®¡ç†å‘˜ä¼¼ä¹ä¹Ÿä»æ¥éƒ½ä¸ç”¨vagrantæ¥è¿›è¡Œå¼€å‘ã€‚</p>
<h1 id="é¢å‘çš„è¯»è€…"><a href="#é¢å‘çš„è¯»è€…" class="headerlink" title="é¢å‘çš„è¯»è€…"></a>é¢å‘çš„è¯»è€…</h1><p>è¿™ä¸ªè¿˜æ˜¯æŒºå®ç”¨ï¼Œéš¾åº¦ä¹Ÿæ˜¯ç•¥é«˜çš„ã€‚å¸Œæœ›å¤§å®¶éƒ½æ¥çœ‹çœ‹ã€‚ä¸»è¦è¿˜æ˜¯ç»™è‡ªå·±çœ‹ã€‚</p>
<h1 id="Vagrantçš„é—®é¢˜"><a href="#Vagrantçš„é—®é¢˜" class="headerlink" title="Vagrantçš„é—®é¢˜"></a>Vagrantçš„é—®é¢˜</h1><p><del>è¿™é‡Œä¹Ÿä¸å‘è¸©å‘çš„å›¾äº†ï¼Œä¸€æ¥æ²¡å¸®åŠ©ï¼ŒäºŒæ¥ä¹Ÿæ²¡è¿™ä¸ªæ—¶é—´é‡æ–°è¸©è¿™ä¸ªå‘</del><br>æˆ‘ç¿»äº†ä¸€ä¸‹æˆ‘ä¸€å‘¨ä»¥å‰çš„<a target="_blank" rel="noopener" href="https://cmx.dzm.pp.ua/@Network/115004094040092266">å˜Ÿæ–‡</a><del>å‰åçš„é”®æ”¿åˆ«ä»‹æ„å“ˆğŸ˜„</del><br>åŸæ–‡ï¼š</p>
<blockquote>
<p>#æŠ€æœ¯ç›¸å…³  #é•¿æ¯›è±¡å®ä¾‹å‡çº§<br>æœ¬æ¥æˆ‘æƒ³å†™ä¸ªåšå®¢çš„ï¼Œä½†æ˜¯é—®é¢˜æ— æ³•è§£å†³è¿˜æ˜¯ç®—äº†ğŸ¥¹<br>æ˜¨å¤©æˆ‘æŠŠæˆ‘çš„é­”æ”¹éƒ¨åˆ†åˆå¹¶è¿›é•¿æ¯›è±¡å®˜æ–¹åˆ†æ”¯v4.4ï¼Œç„¶åç”¨vagrantè¿è¡Œå‘ç°ä¸èƒ½ç”¨äº†ğŸ¥¹è¾“å‡ºçš„æ—¥å¿—æ˜¾ç¤ºæˆ‘é­”æ”¹çš„éƒ¨åˆ†ä»£ç æœ‰é—®é¢˜<br>å¥½ï¼Œæˆ‘å†æ£€å‡ºåˆ°å®˜æ–¹çš„v4.4.3ç‰ˆæœ¬ï¼ŒåŸå°ä¸åŠ¨çš„ç‰ˆæœ¬<br>ç»“æœå®ƒæ˜¾ç¤ºç¼ºå°‘libvipsï¼Œå®‰è£…äº†ä»¥ååˆæ˜¾ç¤ºlibvipsç‰ˆæœ¬ä¸å¤ŸğŸ¥¹<br>ä¹‹åè¿˜å‡çº§äº†vagrantè™šæ‹Ÿæœºçš„ubuntuï¼Œå‡åˆ°22.04ä¹Ÿæ²¡ç”¨ï¼Œè¿˜æœ‰è½¯ä»¶ç‰ˆæœ¬ä¸å¤ŸğŸ˜¡<br>æœ€åå‡åˆ°Ubuntu 24.04ï¼ŒæƒŠå–œåˆæ¥äº†ï¼ŒNFSæŒ‚è½½ä¸äº†ï¼ŒæŒ‚è½½äº†ä»¥åï¼Œåˆç»™æˆ‘æŠ¥é”™ğŸ™ƒ</p>
</blockquote>
<p>ç°åœ¨åˆ†æä¸‹æ¥ï¼Œä¸€å¼€å§‹åœ¨æˆ‘é­”æ”¹ç‰ˆä»£ç ä¸Šè¿è¡Œï¼Œæˆ‘çš„ä»£ç æœ¬èº«å°±æ˜¯æœ‰é—®é¢˜çš„ï¼Œå®ƒç¡®å®ä¸å®˜æ–¹v4.4.3ç‰ˆæœ¬å‘ç”Ÿäº†å†²çªã€‚æ­¤å¤–ï¼Œâ€œå®˜æ–¹çº¯å‡€ç‰ˆâ€çš„é•¿æ¯›è±¡v4.4.3ä¹Ÿæ— æ³•åœ¨<code>Vagrantfile</code>æ‰€é…ç½®çš„è™šæ‹Ÿæœºä¸Šè¿è¡Œã€‚è¿™æ–¹é¢æˆ‘å½“æ—¶å°±ç•™æ„äº†æŠ¥é”™ä¿¡æ¯ï¼Œç¼ºå°‘libvipsã€‚è¡¥ä¸Šäº†libvipsä»¥åï¼Œå…¶ä»–ä¸€ä¸ªæ¥ä¸€ä¸ªçš„ä¾èµ–åˆä¸è¡Œäº†ã€‚æˆ‘ç”¨<code>apt update &amp;&amp; apt search</code>æŸ¥çœ‹äº†ä¸€ä¸‹ç‰ˆæœ¬ï¼Œå‘ç°é‚£ä¸ªUbuntuç‰ˆæœ¬çš„æœ€æ–°ç‰ˆçš„ç‰ˆæœ¬å·æ˜¯è¿œä½äºé•¿æ¯›è±¡v4.4åˆ†æ”¯æ‰€éœ€ç‰ˆæœ¬çš„ã€‚</p>
<p>äºæ˜¯ï¼Œæˆ‘å°±æ‰‹åŠ¨å‡çº§äº†vagrantè™šæ‹Ÿæœºçš„Ubuntuç‰ˆæœ¬ã€‚æ¥ä¸‹æ¥é‡åˆ°çš„åˆä¸€ä¸ªå¤§å‘ï¼Œå°±æ˜¯Ubuntu24.04ç‰ˆçš„NFSæŒ‚è½½çš„ä¸»æœºç›®å½•ï¼Œä¸èƒ½æœ‰ä¸­æ–‡ï¼è¦å»æ‰ä¸­æ–‡ï¼Œå°±å¾—å…ˆæŠŠNFSä»ä»»åŠ¡ç®¡ç†å™¨ç»™åœæ‰ï¼Œå¦åˆ™ä¸€ç›´å ç”¨æ–‡ä»¶å¤¹ï¼Œæ— æ³•æ”¹åï¼Œæ²¡æœ‰è€å¿ƒçš„å°ç™½å¾€å¾€å°±å¾—æŠŠGoogleå…³æ‰é‡å¯ç”µè„‘äº†ğŸ˜„ã€‚</p>
<p><del>æ¥ä¸åŠä¸ºå‰é¢çš„å¤§å‘å“€æ‚¼ï¼Œ</del>ç´§è·Ÿåœ¨ä¸­æ–‡bugåé¢çš„å¤§å‘æ˜¯ğŸ˜…ï¼Œè™šæ‹Ÿæœºå†…ï¼ŒNFSçš„è¿™ä¸ªç‰ˆæœ¬ä¸èƒ½ç”¨udpæŒ‚è½½ã€‚è¿™å½“ç„¶æ˜¯å¾ˆåé¢æ‰å¤„ç†æ‰çš„å¤§å‘ã€‚</p>
<p>ä¿®æ”¹<code>Vagrantfile</code>ç»•å¼€UDPä»¥åï¼Œç­‰ç€æˆ‘çš„å¤§å‘æˆ‘è®°å¾—å¥½åƒæ˜¯æ— æ³•è¯»å–æ–‡ä»¶ï¼Œåæ­£å®‰è£…rubyçš„æ—¶å€™å°±æ— æ³•è¯»å–ç‰ˆæœ¬å·ï¼Œåªä¼šå®‰è£…ruby3.0.0ğŸ˜…è¿›ä¸€æ­¥çš„ä¾èµ–å°±æ›´åˆ«è¯´äº†</p>
<h1 id="è™šæ‹Ÿæœºè¸©å‘è®°"><a href="#è™šæ‹Ÿæœºè¸©å‘è®°" class="headerlink" title="è™šæ‹Ÿæœºè¸©å‘è®°"></a>è™šæ‹Ÿæœºè¸©å‘è®°</h1><p>é•¿æ¯›è±¡æœ‰ä¸€ç‚¹éå¸¸å¥½ï¼Œå°±æ˜¯æ–‡æ¡£éå¸¸å®Œå¤‡ã€‚ä¸ºä»€ä¹ˆé•¿æ¯›è±¡åŠŸèƒ½è¿™ä¹ˆå°‘ï¼Œå†…å­˜æ¶ˆè€—é‚£ä¹ˆå¤§ï¼Œæˆ‘è¿˜è¦ç”¨é•¿æ¯›è±¡å‘¢ï¼Ÿå› ä¸ºæˆ‘æ˜¯ä¸€ä¸ªæŠ€æœ¯å°ç™½ï¼Œä¸è®ºå®‰è£…ä»€ä¹ˆç§ç±»ï¼Œä»€ä¹ˆåˆ†æ”¯çš„Fediè½¯ä»¶ï¼Œæˆ‘éƒ½è¦æ¥çœ‹<a target="_blank" rel="noopener" href="https://docs.joinmastodon.org/">é•¿æ¯›è±¡å®˜æ–¹æ–‡æ¡£</a>ã€‚è¿™çœŸä¸æ˜¯æˆ‘å¹ï¼Œè¿™æ˜¯äº‹å®ã€‚ä¸çŸ¥é“è”é‚¦å®‡å®™æ˜¯ä¸æ˜¯é•¿æ¯›è±¡çš„åˆ›å§‹äººå‘æ˜çš„ï¼Ÿæ‡‚çš„è¯»è€…åœ¨è¯„è®ºåŒºè§£é‡Šä¸€ä¸‹ğŸ¥º</p>
<blockquote>
<p>æ±‚æ±‚ä½ æŠŠç½‘ç»œå…³é—­</p>
</blockquote>
<iframe src="//player.bilibili.com/player.html?isOutside=true&aid=1551468009&bvid=BV1yy421i7cq&cid=1456693714&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>

<p>æˆ‘æ ¹æ®å®˜æ–¹æ–‡æ¡£<a target="_blank" rel="noopener" href="https://docs.joinmastodon.org/dev/setup/#manual">https://docs.joinmastodon.org/dev/setup/#manual</a> å®‰è£…äº†é•¿æ¯›è±¡æµ‹è¯•ç¯å¢ƒã€‚åˆè¸©äº†ä¸å°‘å‘ã€‚<br>é¦–å…ˆï¼Œé•¿æ¯›è±¡å¾ˆéš¾åœ¨æ— è™šæ‹Ÿæœºçš„æ¡ä»¶ä¸‹åœ¨Windowsä¸‹è¿è¡Œï¼Œé™¤éä½¿ç”¨WSLï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯è™šæ‹Ÿæœºã€‚å…·ä½“æˆ‘æ²¡è¯•è¿‡åœ¨Windowsä¸‹è·‘é•¿æ¯›è±¡ï¼Œæ‰¾äº†10åˆ†é’Ÿä¹Ÿæ²¡æœ‰æ‰¾åˆ°ä¸èƒ½åœ¨Windowsä¸‹è¿è¡Œçš„ä¾èµ–ã€‚æ€»ä¹‹è½¯ä»¶åŒ…ä¹Ÿä¸å¦‚Linuxå¥½ç®¡ç†ã€‚</p>
<h2 id="VMWare"><a href="#VMWare" class="headerlink" title="VMWare"></a>VMWare</h2><p>æˆ‘é¦–å…ˆåœ¨VMWareä¸Šå®‰è£…äº†æ¡Œé¢ç‰ˆçš„Ubuntuã€‚æ¯æ¬¡éƒ½éœ€è¦èŠ±1å°æ—¶ï¼è¿˜éœ€è¦å®‰è£…<code>open-vm-tools</code>ã€‚</p>
<p>å®‰è£…äº†å®˜æ–¹æ–‡æ¡£æ‰€è¿°çš„ä¾èµ–å’Œæ­£ç¡®ç‰ˆæœ¬çš„Rubyä»¥åï¼Œè¿è¡Œ<code>bundle install</code>å’Œ<code>yarn install</code>ï¼Œåˆ›å»ºæ•°æ®åº“è§’è‰²ã€‚<br>åœ¨é•¿æ¯›è±¡ç›®å½•ä½¿ç”¨å‘½ä»¤<code>bin/rails db:setup</code>åˆå§‹åŒ–æ•°æ®åº“ã€‚</p>
<blockquote>
<p>æ³¨æ„âš ï¼š<code>bin/rails db:setup</code>å‘½ä»¤ä¼šæ¸…é™¤æ•°æ®åº“ï¼è§†ç¯å¢ƒå˜é‡è€Œå®šï¼Œåœ¨è¿™é‡Œä¼šæ¸…é™¤å¼€å‘ç¯å¢ƒçš„æ•°æ®åº“ï¼</p>
</blockquote>
<p>æ¥ç€è¿è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gem install foreman --no-document</span><br><span class="line">foreman start</span><br></pre></td></tr></table></figure>
<p>è§‚å¯Ÿä»£ç å‘ç°ï¼Œåœ¨é•¿æ¯›è±¡ç›®å½•è¿è¡Œ<code>bin/dev</code>ä¹Ÿæ˜¯ç­‰æ•ˆçš„</p>
<p>æµ‹è¯•æœåŠ¡å™¨è¿è¡Œåï¼Œåœ¨æµè§ˆå™¨è¾“å…¥<a target="_blank" rel="noopener" href="http://localhost:3000/">http://localhost:3000</a> å³å¯ç”¨å®˜æ–¹æ–‡æ¡£æ‰€è¿°çš„é‚®ç®±å’Œå¯†ç ä»¥ç«™é•¿èº«ä»½ç™»å½•æµ‹è¯•ç¯å¢ƒçš„é•¿æ¯›è±¡å®ä¾‹ã€‚</p>
<h3 id="å‘1"><a href="#å‘1" class="headerlink" title="å‘1"></a>å‘1</h3><p>ä»¥ä¸Šæ­¥éª¤å½“ä½ ç›´æ¥åœ¨Linuxè™šæ‹Ÿæœºå†…å…‹éš†é•¿æ¯›è±¡ä»£ç ï¼Œæ˜¯è‚¯å®šèƒ½è¿è¡Œçš„ã€‚ä½†æ˜¯ï¼Œå¤§å‘æ¥äº†ï¼Œå½“ä½ ç”¨VMWareå…±äº«æ–‡ä»¶å¤¹ï¼ŒæŠŠä½ çš„ä»£ç æ–‡ä»¶å…±äº«è¿›å»ï¼Œå°±ä¼šå¡åœ¨<code>yarn install</code>ç¼–è¯‘å¤±è´¥ï¼Œ<code>foreman start</code>å½“ç„¶ä¹Ÿæ˜¯è·‘ä¸èµ·æ¥çš„ã€‚å®ƒæ­»åœ¨äº†Linkè¿™ä¸€æ­¥ã€‚è¿™æ˜¯å› ä¸ºåœ¨VMWareçš„å…±äº«æ–‡ä»¶å¤¹å†…ï¼Œæ˜¯æ— æ³•å»ºç«‹è½¯é“¾æ¥çš„ğŸ˜…ã€‚ï¼ˆå‰é¢è¿˜æœ‰ä¸€ä¸ªå°å‘ï¼Œå°±æ˜¯éœ€è¦æŠŠä½ æ“ä½œçš„érootç”¨æˆ·ç»™åŠ å…¥åˆ°å…±äº«æ–‡ä»¶å¤¹çš„ç»„é‡Œå»ï¼‰</p>
<h3 id="å‘2"><a href="#å‘2" class="headerlink" title="å‘2"></a>å‘2</h3><p>é‚£æˆ‘æŠŠè™šæ‹Ÿæœºå†…çš„æ–‡ä»¶å¤¹å…±äº«å‡ºæ¥è¡Œä¸è¡Œï¼Ÿä¸”ä¸è¯´ä½ è¾›è‹¦å¼€å‘çš„æœªæäº¤ä»£ç ä¼šä¸ä¼šè·Ÿè™šæ‹Ÿæœºä¸€èµ·éšé£è€Œå»äº†ï¼Œå…‰æ˜¯ç”¨SMBå…±äº«å‡ºæ¥ï¼ˆç”¨<code>ç½‘ä¸Šé‚»å±…</code>å…±äº«å‡ºæ¥ï¼‰ã€‚ä¹ä¸€çœ‹ä½ å¯ä»¥ç”¨å¤–é¢çš„SourceTreeå„ç§<code>checkout</code>ä»£ç ï¼Œä½†åˆ°äº†<code>commit</code>çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºé—®é¢˜ï¼Œå®ƒæç¤ºè¿™ä¸ªè·¯å¾„ä¸å¯¹ã€‚<em>åæ­£æˆ‘äººéº»äº†</em>ï¼Œæœ€åæŠŠä¸¤ä¸ªæ–‡ä»¶æ‹·å‡ºæ¥æäº¤äº†ï¼Œè¿™æ³¢ä¸äºã€‚</p>
<h2 id="VirtualBox"><a href="#VirtualBox" class="headerlink" title="VirtualBox"></a>VirtualBox</h2><p>ç»è¿‡ä¸€å¤©çš„æ‘¸é±¼Googleï¼Œç¬¬äºŒå¤©ä¸‹ç­ï¼Œæˆ‘åˆåœ¨VirtualBoxé‡æ–°å®‰è£…äº†ä¸€éç³»ç»Ÿã€‚è¿™é‡Œéœ€è¦ç”¨å‘½ä»¤è¡Œå¼€å¯å…è®¸å…±äº«æ–‡ä»¶å¤¹é“¾æ¥ï¼Œ</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">VBoxManage setextradata YOURVMNAME VBoxInternal2/SharedFoldersEnableSymlinksCreate/YOURSHAREFOLDERNAME <span class="number">1</span>  </span><br><span class="line"># YOURVMNAMEä¸ºè™šæ‹Ÿæœºä¸­ubuntuç³»ç»Ÿçš„åç§°</span><br><span class="line"># YOURSHAREFOLDERNAME ä¸ºå…±äº«çš„ç›®å½•åç§°</span><br><span class="line"># ä¾‹å¦‚ï¼š</span><br><span class="line"><span class="function">C:\<span class="title">Program</span> <span class="title">Files</span>\<span class="title">Oracle</span>\<span class="title">VirtualBox</span>\<span class="title">VBoxManage</span> <span class="title">setextradata</span> <span class="title">ubuntu1404</span> <span class="title">VBoxInternal2</span>/<span class="title">SharedFoldersEnableSymlinksCreate</span>/<span class="title">share</span> 1</span></span><br></pre></td></tr></table></figure>
<p>ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ¥ç¼–è¾‘è™šæ‹Ÿæœºæ–‡ä»¶ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚<br>å…ˆç”¨<code>ln -s</code>æµ‹è¯•äº†ä¸€ä¸‹ï¼Œç¡®å®å¯ä»¥ã€‚æ¥ç€ç»§ç»­å®‰è£…ç¯å¢ƒï¼Œ<code>yarn install</code>ä¹Ÿç¡®å®é¡ºåˆ©å®Œæˆäº†ã€‚å‘ç°ç¡®å®å¯ä»¥å¯åŠ¨ã€‚</p>
<p>ç¾ä¸­ä¸è¶³çš„æ˜¯ï¼Œ<code>/api/v1/streaming/?</code>çš„è¯·æ±‚ä¼šå¾—åˆ°500çš„çŠ¶æ€ç ã€‚å…·ä½“åŸå› è¿˜æ²¡åƒé€ã€‚è¿™ä¸ªå‘æ— ä¼¤å¤§é›…ï¼Œéƒ¨ç½²åœ¨ç”Ÿäº§ç¯å¢ƒå’ŒVagrantä¸Šçš„é•¿æ¯›è±¡éƒ½æ˜¯101çŠ¶æ€ç ã€‚</p>
<h1 id="å›å½’Vagrant"><a href="#å›å½’Vagrant" class="headerlink" title="å›å½’Vagrant"></a>å›å½’Vagrant</h1><p>Vagrantçš„åŸç†å…¶å®ä¹Ÿå¹¶ä¸å¤æ‚ï¼Œè™½ç„¶æˆ‘è‡³ä»Šè¿˜æ²¡å®Œå…¨åƒé€ğŸ˜„ã€‚<br>è¿™ä¸ªè½¯ä»¶å…¶å®ä¹Ÿæ˜¯ç”¨Rubyç¼–å†™çš„ï¼Œæ‰€ä»¥ï¼Œå®ƒå‡ºBUGçš„æ—¶å€™ï¼Œæˆ‘è¿˜ä»¥ä¸ºè™šæ‹Ÿæœºé‡Œçš„é•¿æ¯›è±¡åœ¨ç”¨å¤–é¢çš„Rubyå‘¢ğŸ˜…ã€‚</p>
<p>å½“ä½ åœ¨ä½ çš„æ–°é¡¹ç›®æ–‡ä»¶å¤¹ä¸­ï¼Œç”¨å‘½ä»¤è¡Œè¾“å…¥<code>vagrant init</code>æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª<code>Vagrantfile</code>ï¼Œä¹Ÿå°±æ˜¯é•¿æ¯›è±¡é‡Œçš„é‚£ä¸ªã€‚è¿™ä¸ªæ–‡ä»¶è™½ç„¶æ²¡æœ‰åç¼€ï¼Œä½†å…¶å®æ˜¯ä¸ªrubyæ–‡ä»¶ï¼Œéµå¾ªrubyè¯­æ³•ï¼Œä½ å°±æŠŠå®ƒçœ‹ä½œä¸€ä¸ª<code>.rb</code>æ–‡ä»¶å¥½äº†ã€‚åœ¨ä½¿ç”¨ç¼–è¾‘å™¨æ—¶ï¼Œé«˜äº®é£æ ¼è®¾ç½®ä¸ºRubyã€‚</p>
<p>è¿™æ—¶å€™å°±ç”¨rubyçš„è¯­æ³•æ¥è§£è¯»ä¸€ä¸‹vagrantåˆ°åº•åšäº†ä»€ä¹ˆï¼š<br>åœ¨ä½ ä½¿ç”¨<code>vagrant up</code>çš„æ—¶å€™ï¼Œä½ æ²¡æœ‰ç”Ÿæˆè¿‡vagrantå®ä¾‹ï¼Œä¹Ÿæ²¡æœ‰åŒåè™šæ‹Ÿæœºï¼Œé‚£ä¹ˆå®ƒå°±ä¼šæ­£å¸¸è¿è¡Œã€‚å¦‚æœæœ‰åŒåè™šæ‹Ÿæœºï¼Œvagrantå°±ä¸ä¼šç»§ç»­è¿è¡Œã€‚é¦–å…ˆå®ƒä¼šä¸‹è½½ä¸€ä¸ªvboxï¼Œå¹¶ä¿®æ”¹virtualboxè™šæ‹Ÿæœºçš„é…ç½®ã€‚è¿˜ä¼šç»™ä½ ç”Ÿæˆä¸€ä¸ªä¸»æœº<code>mastodon.local</code>ã€‚å¯åŠ¨åä¼šæŒ‚è½½æ–‡ä»¶å¤¹ã€‚</p>
<blockquote>
<p>é¿å‘ï¼šNFSç±»å‹çš„æŒ‚è½½ä¸é¡¶ç”¨äº†ï¼Œrsyncç±»å‹çš„æŒ‚è½½é€Ÿåº¦å·¨æ…¢ï¼ŒæŠŠ<code>Vagrantfile</code>é‡Œé‚£ä¸€è¡Œçš„<code>type: &quot;nfs&quot;</code>è¿ç€å‰é¢åé¢çš„é€—å·å’Œåé¢çš„æ‰€æœ‰å‚æ•°ä¸€èµ·åˆ æ‰ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨ç”¨vboxå…±äº«æ–‡ä»¶å¤¹æŒ‚è½½åˆ°<code>Vagrantfile</code>é‡Œçš„åŒæ ·çš„ä½ç½®å»ï¼Œå¹¶ä¸”è‡ªåŠ¨å…è®¸è®¾ç½®è½¯é“¾æ¥ã€‚è™½ç„¶é€Ÿåº¦ç¨å¾®æ…¢ä¸€ç‚¹ï¼Œä½†æ˜¯å¯æ¥å—ï¼Œè€Œä¸”è¡¨ç°æ›´åŠ ç¨³å®šäº†ã€‚</p>
</blockquote>
<p>vagrantå®Œæˆä¸Šè¿°æ“ä½œåï¼Œå°±ä¼šæ‰§è¡Œ<code>provision</code>ä»£ç ã€‚ä¹Ÿå°±æ˜¯<code>Vagrantfile</code>é‡Œé¢å®‰è£…ä¾èµ–ï¼Œå¹¶ä¸”<strong>åˆå§‹åŒ–æ•°æ®åº“</strong>ï¼Œé…ç½®ç¯å¢ƒå˜é‡ã€‚</p>
<p>å½“ä½ å·²ç»ç”Ÿæˆäº†ç›¸å…³è™šæ‹Ÿæœºäº†ï¼Œå†è¿è¡Œ<code>vagrant up</code>ï¼Œé‚£ä¹ˆvagrantå°±ä¼šè¿è¡Œé™¤äº†provisionä»¥å¤–çš„æ‰€æœ‰<code>Vagrantfile</code>ä»£ç ã€‚å¦‚æœéœ€è¦é‡æ–°è¿è¡Œä¸€éprovisionï¼Œé‚£ä¹ˆä½ åªè¦åœ¨vagrantè™šæ‹Ÿæœºå¯åŠ¨åï¼Œè¿è¡Œä¸€é<code>vagrant provision</code>å³å¯ã€‚ä¸ºäº†é¿å…<code>vagrant destroy</code>+<code>vagrant up</code>é‡è£…ç³»ç»Ÿæµªè´¹æ—¶é—´å’Œæ¢¯å­æµé‡ï¼Œå»ºè®®æ´»ç”¨provisionä»£ç ã€‚</p>
<p>Vagrantçš„å¥½å¤„åœ¨äºï¼šå½“ä½ ç”¨<a target="_blank" rel="noopener" href="http://mastodon.local/">http://mastodon.local</a> ç™»å½•æ—¶ï¼Œä½ æ¯æ¬¡ä¿®æ”¹å®Œä»£ç ï¼ŒæŒ‰ä¸‹ä¿å­˜ï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨ï¼Œç»è¿‡æˆ‘çš„æµ‹è¯•ï¼Œè¿™æ˜¯æ‰‹åŠ¨å®‰è£…æµ‹è¯•ç¯å¢ƒæ‰€ä½“ç°ä¸å‡ºæ¥çš„ã€‚</p>
<h1 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h1><p>ä»Šå¤©æ”¹å®Œå®ä¾‹åï¼Œæˆ‘åˆç ”ç©¶äº†ä¸€ä¸‹<a target="_blank" rel="noopener" href="https://hello.2heng.xin/">å°æ£®æ—</a>çš„ä»£ç ï¼Œæƒ³å­¦ä¹ ä¸€ä¸‹markdownæ˜¯æ€ä¹ˆå®ç°çš„ã€‚åˆšå¼€å§‹å‘ç°<code>yarn install</code>è£…ä¸ä¸Šä¾èµ–ï¼Œå‘ç°åŸæ¥æ˜¯<code>Vagrantfile</code>æ²¡æ›´æ–°è¿‡ï¼Œæˆ‘æŠŠæˆ‘æ”¹å‡ºæ¥çš„ä»£ç è´´ä¸€ä¸‹</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- mode: ruby -*-</span></span><br><span class="line"><span class="comment"># vi: set ft=ruby :</span></span><br><span class="line"></span><br><span class="line"><span class="variable constant_">ENV</span>[<span class="string">&quot;PORT&quot;</span>] |<span class="params"></span>|= <span class="string">&quot;3000&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$provision</span> = <span class="string">&lt;&lt;SCRIPT</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">cd /vagrant # This is where the host folder/repo is mounted</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Add the yarn repo + yarn repo keys</span></span><br><span class="line"><span class="string">curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -</span></span><br><span class="line"><span class="string">sudo apt-add-repository &#x27;deb https://dl.yarnpkg.com/debian/ stable main&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Add repo for NodeJS</span></span><br><span class="line"><span class="string">curl -sL https://deb.nodesource.com/setup_14.x | sudo bash -</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Add firewall rule to redirect 80 to PORT and save</span></span><br><span class="line"><span class="string">sudo iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-port <span class="subst">#&#123;<span class="variable constant_">ENV</span>[<span class="string">&quot;PORT&quot;</span>]&#125;</span></span></span><br><span class="line"><span class="string">echo iptables-persistent iptables-persistent/autosave_v4 boolean true | sudo debconf-set-selections</span></span><br><span class="line"><span class="string">echo iptables-persistent iptables-persistent/autosave_v6 boolean true | sudo debconf-set-selections</span></span><br><span class="line"><span class="string">sudo apt-get install iptables-persistent -y</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Add packages to build and run Mastodon</span></span><br><span class="line"><span class="string">sudo apt-get install \</span></span><br><span class="line"><span class="string">  git-core \</span></span><br><span class="line"><span class="string">  g++ \</span></span><br><span class="line"><span class="string">  libpq-dev \</span></span><br><span class="line"><span class="string">  libxml2-dev \</span></span><br><span class="line"><span class="string">  libxslt1-dev \</span></span><br><span class="line"><span class="string">  imagemagick \</span></span><br><span class="line"><span class="string">  nodejs \</span></span><br><span class="line"><span class="string">  redis-server \</span></span><br><span class="line"><span class="string">  redis-tools \</span></span><br><span class="line"><span class="string">  postgresql \</span></span><br><span class="line"><span class="string">  postgresql-contrib \</span></span><br><span class="line"><span class="string">  yarn \</span></span><br><span class="line"><span class="string">  libicu-dev \</span></span><br><span class="line"><span class="string">  libidn11-dev \</span></span><br><span class="line"><span class="string">  libreadline-dev \</span></span><br><span class="line"><span class="string">  libpam0g-dev \</span></span><br><span class="line"><span class="string">  -y</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Install rvm</span></span><br><span class="line"><span class="string">read RUBY_VERSION &lt; .ruby-version</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">curl -sSL https://rvm.io/mpapis.asc | gpg --import</span></span><br><span class="line"><span class="string">curl -sSL https://rvm.io/pkuczynski.asc | gpg --import</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">curl -sSL https://raw.githubusercontent.com/rvm/rvm/stable/binscripts/rvm-installer | bash -s stable --ruby=$RUBY_VERSION</span></span><br><span class="line"><span class="string">source /home/vagrant/.rvm/scripts/rvm</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Install Ruby</span></span><br><span class="line"><span class="string">rvm reinstall ruby-$RUBY_VERSION --disable-binary</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Configure database</span></span><br><span class="line"><span class="string">sudo -u postgres createuser -U postgres vagrant -s</span></span><br><span class="line"><span class="string">sudo -u postgres createdb -U postgres mastodon_development</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Install gems and node modules</span></span><br><span class="line"><span class="string">gem install bundler foreman</span></span><br><span class="line"><span class="string">bundle install</span></span><br><span class="line"><span class="string">yarn install</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Build Mastodon</span></span><br><span class="line"><span class="string">export RAILS_ENV=development </span></span><br><span class="line"><span class="string">export $(cat &quot;.env.vagrant&quot; | xargs)</span></span><br><span class="line"><span class="string">bundle exec rails db:setup</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Configure automatic loading of environment variable</span></span><br><span class="line"><span class="string">echo &#x27;export RAILS_ENV=development&#x27; &gt;&gt; ~/.bash_profile</span></span><br><span class="line"><span class="string">echo &#x27;export $(cat &quot;/vagrant/.env.vagrant&quot; | xargs)&#x27; &gt;&gt; ~/.bash_profile</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">SCRIPT</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$start</span> = <span class="string">&lt;&lt;SCRIPT</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">echo &#x27;To start server&#x27;</span></span><br><span class="line"><span class="string">echo &#x27;  $ vagrant ssh -c &quot;cd /vagrant &amp;&amp; foreman start&quot;&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">SCRIPT</span></span><br><span class="line"></span><br><span class="line"><span class="variable constant_">VAGRANTFILE_API_VERSION</span> = <span class="string">&quot;2&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vagrant</span>.configure(<span class="variable constant_">VAGRANTFILE_API_VERSION</span>) <span class="keyword">do</span> |<span class="params">config</span>|</span><br><span class="line"></span><br><span class="line">  config.vm.box = <span class="string">&quot;ubuntu/bionic64&quot;</span></span><br><span class="line"></span><br><span class="line">  config.vm.provider <span class="symbol">:virtualbox</span> <span class="keyword">do</span> |<span class="params">vb</span>|</span><br><span class="line">    vb.name = <span class="string">&quot;little-forest&quot;</span></span><br><span class="line">    vb.customize [<span class="string">&quot;modifyvm&quot;</span>, <span class="symbol">:id</span>, <span class="string">&quot;--memory&quot;</span>, <span class="string">&quot;8192&quot;</span>]</span><br><span class="line">    vb.customize [<span class="string">&quot;modifyvm&quot;</span>, <span class="symbol">:id</span>, <span class="string">&quot;--cpus&quot;</span>, <span class="string">&quot;3&quot;</span>]</span><br><span class="line">    <span class="comment"># Increase the number of CPUs. Uncomment and adjust to</span></span><br><span class="line">    <span class="comment"># increase performance</span></span><br><span class="line">    <span class="comment"># vb.customize [&quot;modifyvm&quot;, :id, &quot;--cpus&quot;, &quot;3&quot;]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Disable VirtualBox DNS proxy to skip long-delay IPv6 resolutions.</span></span><br><span class="line">    <span class="comment"># https://github.com/mitchellh/vagrant/issues/1172</span></span><br><span class="line">    vb.customize [<span class="string">&quot;modifyvm&quot;</span>, <span class="symbol">:id</span>, <span class="string">&quot;--natdnsproxy1&quot;</span>, <span class="string">&quot;off&quot;</span>]</span><br><span class="line">    vb.customize [<span class="string">&quot;modifyvm&quot;</span>, <span class="symbol">:id</span>, <span class="string">&quot;--natdnshostresolver1&quot;</span>, <span class="string">&quot;off&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Use &quot;virtio&quot; network interfaces for better performance.</span></span><br><span class="line">    vb.customize [<span class="string">&quot;modifyvm&quot;</span>, <span class="symbol">:id</span>, <span class="string">&quot;--nictype1&quot;</span>, <span class="string">&quot;virtio&quot;</span>]</span><br><span class="line">    vb.customize [<span class="string">&quot;modifyvm&quot;</span>, <span class="symbol">:id</span>, <span class="string">&quot;--nictype2&quot;</span>, <span class="string">&quot;virtio&quot;</span>]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># This uses the vagrant-hostsupdater plugin, and lets you</span></span><br><span class="line">  <span class="comment"># access the development site at http://mastodon.local.</span></span><br><span class="line">  <span class="comment"># If you change it, also change it in .env.vagrant before provisioning</span></span><br><span class="line">  <span class="comment"># the vagrant server to update the development build.</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="comment"># To install:</span></span><br><span class="line">  <span class="comment">#   $ vagrant plugin install vagrant-hostsupdater</span></span><br><span class="line">  config.vm.hostname = <span class="string">&quot;mastodon.local&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">defined</span>?(<span class="title class_">VagrantPlugins</span><span class="symbol">:</span><span class="symbol">:HostsUpdater</span>)</span><br><span class="line">    config.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">&quot;192.168.42.42&quot;</span>, <span class="symbol">nictype:</span> <span class="string">&quot;virtio&quot;</span></span><br><span class="line">    config.hostsupdater.remove_on_suspend = <span class="literal">false</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> config.vm.networks.any? &#123; |<span class="params">type, options</span>| type == <span class="symbol">:private_network</span> &#125;</span><br><span class="line">    config.vm.synced_folder <span class="string">&quot;.&quot;</span>, <span class="string">&quot;/vagrant&quot;</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    config.vm.synced_folder <span class="string">&quot;.&quot;</span>, <span class="string">&quot;/vagrant&quot;</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Otherwise, you can access the site at http://localhost:3000 and http://localhost:4000 , http://localhost:8080</span></span><br><span class="line">  config.vm.network <span class="symbol">:forwarded_port</span>, <span class="symbol">guest:</span> <span class="number">3000</span>, <span class="symbol">host:</span> <span class="number">3000</span></span><br><span class="line">  config.vm.network <span class="symbol">:forwarded_port</span>, <span class="symbol">guest:</span> <span class="number">4000</span>, <span class="symbol">host:</span> <span class="number">4000</span></span><br><span class="line">  config.vm.network <span class="symbol">:forwarded_port</span>, <span class="symbol">guest:</span> <span class="number">8080</span>, <span class="symbol">host:</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Full provisioning script, only runs on first &#x27;vagrant up&#x27; or with &#x27;vagrant provision&#x27;</span></span><br><span class="line">  config.vm.provision <span class="symbol">:shell</span>, <span class="symbol">inline:</span> <span class="variable">$provision</span>, <span class="symbol">privileged:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Start up script, runs on every &#x27;vagrant up&#x27;</span></span><br><span class="line">  config.vm.provision <span class="symbol">:shell</span>, <span class="symbol">inline:</span> <span class="variable">$start</span>, <span class="symbol">run:</span> <span class="string">&#x27;always&#x27;</span>, <span class="symbol">privileged:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¿è¡Œä¸‹æ¥ï¼Œå‘ç°mainåˆ†æ”¯ç¡®å®æ˜¯ä»–å®ä¾‹çš„ä»£ç ã€‚ä¹‹åçš„ç ”ç©¶è¿‡äº›å¤©å†ç»§ç»­ã€‚</p>
</div><div class="post-copyright valine" id="comments-container"><script src="//unpkg.com/valine@1.4.14/dist/Valine.min.js"></script><script>let arr = location.href.split('/#more')[0].split('/');
let title = arr[arr.length - 1];
if (title === '') {
    title = arr[arr.length - 2];
}
var flag = false;
var gitFun = function () {
    try {
        var valineObj = window.GLOBAL_CONFIG.valine;
        new Valine({
            el: "#comments-container",
            ...valineObj
        });
        flag = true;
    } catch (e) {
        flag = false;
    }
}
var setIn = setInterval(() => {
    if (!flag) {
        gitFun();
    } else {
        clearInterval(setIn);
    }
}, 200);</script></div></article><div id="pagination"><div class="next-post pull-right"><span class="line line-top"></span><span class="line line-right"></span><span class="line line-bottom"></span><span class="line line-left"></span><a href="../%E9%95%BF%E6%AF%9B%E8%B1%A1%E5%A4%A7%E7%89%88%E6%9C%AC%E6%9B%B4%E6%96%B0%E8%B8%A9%E5%9D%91%E5%BF%83%E5%BE%97/"><span>é•¿æ¯›è±¡å¤§ç‰ˆæœ¬æ›´æ–°è¸©å‘å¿ƒå¾—</span><span>&nbsp;</span><i class="fas fa-angle-right"></i></a></div></div><!--div!= paginator()--></div></div><div class="button-hover" id="return-top"><i class="fas fa-arrow-up" aria-hidden="true"></i></div><footer><div id="footer"><div class="button-hover" id="side-button"><i class="fas fa-arrow-right"></i></div><div class="right-content"><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fas fa-file-o"></i></span><span id="busuanzi_value_page_pv"></span><span></span></div><div class="copyright">&copy;2025 By å¦™ç“¦è‰</div></div></div></footer></div><!--js(src=url_for(url) + '?version=' + version())--><script src="../../../../js/thirdparty/jquery-3.3.1.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="../../../../js/thirdparty/velocity.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="../../../../js/thirdparty/jquery.mCustomScrollbar.concat.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="../../../../js/fan.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="../../../../js/canvas_bg.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="../../../../js/utils.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="../../../../js/scroll.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="../../../../js/sidebar.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="../../../../js/copy.js"></script><!--script(src=url)--><div class="search-dialog"><div id="algolia-search-title">Algolia</div><div class="search-close-button"><i class="fa fa-times"></i></div><!--div#current-refined-values--><!--div#clear-all--><div id="search-box"></div><!--div#refinement-list--><hr><div id="hits"></div><div id="algolia-pagination"></div></div><div class="search-mask"></div><script src="../../../../js/search/algolia.js"></script></body></html>